# Dependency Map

**File**: p0s0f3.md  
**SCIS Version**: 4.1  
**Project**: Polkadot Discovery PoC  
**Last Updated**: November 12, 2025

---

## Overview

This document maps all internal and external dependencies for the Polkadot Discovery Platform PoC. It tracks imports, component relationships, and external package usage across all 29 project files.

---

## Internal Dependencies

### Phase 0: Backend/Core Logic

#### p0s0f1.js

- **Components**: Cp0s0f1.1 (AppOrchestrator)
- **Imports from**: p0s1f1.js, p0s0f4.js, p0s0f5.js, p0s0f6.js
- **Imported by**: None (entry point)
- **Description**: Application entry point, orchestrates all core components

#### p0s0f4.js

- **Components**: Cp0s0f4.1 (FilterTemplateEngine), Cp0s0f4.2 (QueryContextAnalyzer)
- **Imports from**: p0s1f1.js, p1s1f6.json
- **Imported by**: p0s0f1.js, p0s2f2.js
- **Description**: Filter template management and query context analysis

#### p0s0f5.js

- **Components**: Cp0s0f5.1 (MockDataManager)
- **Imports from**: p1s1f1.json, p1s1f2.json, p1s1f3.json, p1s1f4.json, p1s1f5.json
- **Imported by**: p0s0f1.js, p0s2f3.js
- **Description**: Mock data loading and management

#### p0s0f6.js

- **Components**: Cp0s0f6.1 (PolkadotConnector), Cp0s0f6.2 (PreferenceStorage)
- **Imports from**: p0s1f1.js
- **Imported by**: p0s0f1.js, p1s3f2.js
- **External dependencies**: @polkadot/api, @polkadot/extension-dapp, @polkadot/ui-keyring, @polkadot/util, @polkadot/util-crypto
- **Description**: Polkadot chain integration utilities

#### p0s1f1.js

- **Components**: Cp0s1f1.1 (AppConfig)
- **Imports from**: None
- **Imported by**: p0s0f1.js, p0s0f4.js, p0s0f6.js, p0s2f1.js, p0s2f2.js, p1s0f6.jsx
- **Description**: Configuration constants used across application

#### p0s2f1.js

- **Components**: Cp0s2f1.1 (QueryParser), Cp0s2f1.2 (KeywordExtractor)
- **Imports from**: p0s1f1.js
- **Imported by**: p0s2f2.js, p1s0f2.jsx
- **Description**: Query parsing and keyword extraction

#### p0s2f2.js

- **Components**: Cp0s2f2.1 (FilterSelector)
- **Imports from**: p0s1f1.js, p0s0f4.js, p0s2f1.js
- **Imported by**: p1s0f3.jsx
- **Description**: Dynamic filter selection based on query context

#### p0s2f3.js

- **Components**: Cp0s2f3.1 (NewsletterGenerator)
- **Imports from**: p0s0f5.js
- **Imported by**: p1s0f4.jsx
- **Description**: Newsletter content generation

---

### Phase 1: Frontend Components

#### p1s0f2.jsx

- **Components**: Cp1s0f2.1 (SearchInput), Cp1s0f2.2 (SearchResults)
- **Imports from**: p0s2f1.js, p1s3f1.js
- **Imported by**: p1s0f6.jsx
- **External dependencies**: react, lucide-react
- **Description**: Search input and results display components

#### p1s0f3.jsx

- **Components**: Cp1s0f3.1 (FilterPanel), Cp1s0f3.2 (FilterCheckbox)
- **Imports from**: p0s2f2.js, p1s1f6.json
- **Imported by**: p1s0f6.jsx
- **External dependencies**: react, lucide-react
- **Description**: Dynamic filter panel with checkboxes

#### p1s0f4.jsx

- **Components**: Cp1s0f4.1 (NewsletterPreview)
- **Imports from**: p0s2f3.js
- **Imported by**: p1s0f6.jsx
- **External dependencies**: react, lucide-react
- **Description**: Newsletter preview component

#### p1s0f5.jsx

- **Components**: Cp1s0f5.1 (WalletConnect), Cp1s0f5.2 (PreferenceSync)
- **Imports from**: p1s3f2.js
- **Imported by**: p1s0f6.jsx
- **External dependencies**: react, @polkadot/extension-dapp
- **Description**: Wallet connection and preference sync

#### p1s0f6.jsx

- **Components**: Cp1s0f6.1 (App)
- **Imports from**: p0s1f1.js, p1s0f2.jsx, p1s0f3.jsx, p1s0f4.jsx, p1s0f5.jsx, p1s0f7.css
- **Imported by**: None (root component)
- **External dependencies**: react
- **Description**: Root application component

#### p1s3f1.js

- **Components**: Cp1s3f1.1 (ApiClient)
- **Imports from**: None
- **Imported by**: p1s0f2.jsx, p1s0f3.jsx
- **Description**: Generic API client utilities

#### p1s3f2.js

- **Components**: Cp1s3f2.1 (PolkadotAPI)
- **Imports from**: p0s0f6.js
- **Imported by**: p1s0f5.jsx
- **External dependencies**: @polkadot/api, @polkadot/extension-dapp, @polkadot/ui-keyring, @polkadot/util, @polkadot/util-crypto
- **Description**: Polkadot.js API wrapper

---

## External Dependencies

### Runtime Dependencies

| Package                      | Version  | Purpose                                  | Used By                                                    |
| ---------------------------- | -------- | ---------------------------------------- | ---------------------------------------------------------- |
| **react**                    | ^18.2.0  | UI framework                             | p1s0f2.jsx, p1s0f3.jsx, p1s0f4.jsx, p1s0f5.jsx, p1s0f6.jsx |
| **react-dom**                | ^18.2.0  | React DOM rendering                      | p1s0f6.jsx                                                 |
| **lucide-react**             | ^0.263.1 | Icon library                             | p1s0f2.jsx, p1s0f3.jsx, p1s0f4.jsx, p1s0f5.jsx             |
| **@polkadot/api**            | ^10.11.0 | Polkadot chain interaction               | p0s0f6.js, p1s3f2.js                                       |
| **@polkadot/extension-dapp** | ^0.46.6  | Polkadot wallet extensions               | p0s0f6.js, p1s0f5.jsx, p1s3f2.js                           |
| **@polkadot/ui-keyring**     | ^3.6.4   | Keyring management for Polkadot accounts | p0s0f6.js, p1s3f2.js                                       |
| **@polkadot/util**           | ^12.6.1  | Utility functions for Polkadot           | p0s0f6.js, p1s3f2.js                                       |
| **@polkadot/util-crypto**    | ^12.6.1  | Cryptographic utilities for Polkadot     | p0s0f6.js, p1s3f2.js                                       |

### Build Tools

| Package                  | Version  | Purpose                   | Config File |
| ------------------------ | -------- | ------------------------- | ----------- |
| **vite**                 | ^5.0.0   | Build tool and dev server | p1s2f1.js   |
| **@vitejs/plugin-react** | ^4.2.1   | Vite React plugin         | p1s2f1.js   |
| **tailwindcss**          | ^3.4.0   | CSS framework             | p1s2f2.js   |
| **postcss**              | ^8.4.32  | CSS processing            | p1s2f2.js   |
| **autoprefixer**         | ^10.4.16 | CSS vendor prefixing      | p1s2f2.js   |

### Development Tools

| Package                         | Version | Purpose                              |
| ------------------------------- | ------- | ------------------------------------ |
| **eslint**                      | ^8.55.0 | Code linting                         |
| **eslint-plugin-react**         | ^7.33.2 | React-specific linting rules         |
| **eslint-plugin-react-hooks**   | ^4.6.0  | Linting rules for React hooks        |
| **eslint-plugin-react-refresh** | ^0.4.5  | Linting rules for React Fast Refresh |
| **prettier**                    | ^3.1.1  | Code formatting                      |

---

## Dependency Graph

### Entry Points

- **p1s0f6.jsx** (App root component)

### Core Utilities

- **p0s1f1.js** (Configuration)
- **p1s3f1.js** (API client)

### Polkadot Layer

- **p0s0f6.js** (Polkadot connector)
- **p1s3f2.js** (Polkadot API wrapper)
- **p1s0f5.jsx** (Wallet UI)

### Data Layer

- **p0s0f5.js** (Mock data manager)
- **p1s1f1.json** - **p1s1f5.json** (Mock data files)
- **p1s1f6.json** (Filter templates)

### Search Logic

- **p0s2f1.js** (Query parser)
- **p0s2f2.js** (Filter selector)
- **p0s2f3.js** (Newsletter generator)
- **p0s0f4.js** (Filter engine)

### UI Components

- **p1s0f2.jsx** (Search)
- **p1s0f3.jsx** (Filters)
- **p1s0f4.jsx** (Newsletter)
- **p1s0f5.jsx** (Wallet)

---

## Critical Paths

### Search Flow

```
p1s0f2.jsx → p0s2f1.js → p0s0f4.js → p0s2f2.js → p1s0f3.jsx
```

### Polkadot Integration

```
p1s0f5.jsx → p1s3f2.js → p0s0f6.js → Polkadot Chain
```

### Newsletter Generation

```
p1s0f4.jsx → p0s2f3.js → p0s0f5.js → Mock Data
```

---

## Data Files

### Mock Data

- p1s1f1.json (Movies)
- p1s1f2.json (Restaurants)
- p1s1f3.json (Travel)
- p1s1f4.json (Events)
- p1s1f5.json (Tech Products)

### Configuration

- p1s1f6.json (Filter templates)
- p0s1f2.json (Environment variables)
- p1s2f3.json (Package.json)

### Maps

- p0s0f2.json (Component map)
- p0s0f3.md (This file - Dependency map)

---

## Build Order

### Phase 1: Core

1. p0s1f1.js (Configuration)
2. p0s1f2.json (Environment)

### Phase 2: Data

3. p1s1f1.json - p1s1f5.json (Mock data)
4. p1s1f6.json (Filter templates)

### Phase 3: Backend

5. p0s0f4.js (Filter engine)
6. p0s0f5.js (Mock data manager)
7. p0s0f6.js (Polkadot connector)
8. p0s2f1.js (Query parser)
9. p0s2f2.js (Filter selector)
10. p0s2f3.js (Newsletter generator)

### Phase 4: Utilities

11. p1s3f1.js (API client)
12. p1s3f2.js (Polkadot API wrapper)

### Phase 5: Components

13. p1s0f2.jsx (Search)
14. p1s0f3.jsx (Filters)
15. p1s0f4.jsx (Newsletter)
16. p1s0f5.jsx (Wallet)

### Phase 6: Integration

17. p1s0f6.jsx (App root)
18. p0s0f1.js (Orchestrator)

### Phase 7: Configuration

19. p1s2f1.js (Vite config)
20. p1s2f2.js (Tailwind config)
21. p1s2f3.json (Package.json)
22. p1s0f7.css (Global styles)
23. p1s0f1.html (HTML entry)

---

## Statistics

- **Total files mapped**: 29
- **Total components**: 20
- **Total internal dependencies**: 45
- **Total external dependencies**: 13
- **Critical path length**: 5
- **Max dependency depth**: 4

---

## Notes

### Circular Dependency Prevention

The current structure avoids circular dependencies:

- Configuration (p0s1f1.js) is imported but never imports others
- Data files (.json) are leaf nodes
- UI components only import from logic layer, never vice versa

### Import Path Strategy

All imports use relative paths from the flat SCIS structure:

```javascript
import { APP_CONFIG } from "./p0s1f1.js";
import { SearchInput } from "./p1s0f2.jsx";
```

### External API Usage

Polkadot dependencies are isolated to:

- p0s0f6.js (backend connector)
- p1s3f2.js (API wrapper)
- p1s0f5.jsx (UI component)

This allows easy mocking for testing.

---

**End of Dependency Map**
